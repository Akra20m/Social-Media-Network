(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{113:function(e,t,n){e.exports=n(238)},238:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(37),o=n.n(s),c=n(6),u=n(7),i=n(109),l=n(8),p=n(9),m=n(11),d=n(10),b=n(12),f=n(23),h=n(33),O=n(240),v=n(239),y=n(29),E=n(13),j=n.n(E),g=n(25),k=n(110),w=n.n(k).a.create({baseURL:"https://social-network-akram.herokuapp.com"});function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e,t){return function(){var n=Object(g.a)(j.a.mark((function n(r){return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.delete("/posts/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});case 3:n.sent,r({type:"DELETE_POST",payload:t}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0.response);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},R=(n(26),function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.loginUser(e)},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderInput",value:function(e){var t=e.input,n=e.label,r=e.type;return a.a.createElement("div",null,a.a.createElement("label",null,n),a.a.createElement("input",Object.assign({},t,{type:r,required:!0})))}},{key:"errormsg",value:function(){if(422===this.props.user.status)return a.a.createElement("div",null,a.a.createElement("p",null,"Username/Password is incorrect"))}},{key:"render",value:function(){return this.props.user.isLoggedIn?a.a.createElement(h.a,{to:"/dashboard"}):a.a.createElement("div",{className:"test"},a.a.createElement("h2",null,"Login"),a.a.createElement("form",{className:"test",onSubmit:this.props.handleSubmit(this.onSubmit)},a.a.createElement(O.a,{name:"username",label:"Username",type:"text",component:this.renderInput}),a.a.createElement(O.a,{name:"password",label:"Password",type:"password",component:this.renderInput}),a.a.createElement("button",{className:"main_button"},"Login")),this.errormsg())}}]),t}(a.a.Component)),N=Object(c.b)((function(e){return{user:e.user}}),{loginUser:function(e){return function(){var t=Object(g.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.post("/login",e);case 3:r=t.sent,n({type:"LOGIN_USER",payload:P({},r.data,{status:r.status})}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:"LOGIN_ERROR",payload:{status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(v.a)({form:"login"})(R)),x=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.createUser(e)},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderInput",value:function(e){var t=e.input,n=e.label,r=e.type;return a.a.createElement("div",null,a.a.createElement("label",null,n),a.a.createElement("input",Object.assign({},t,{type:r,required:!0})))}},{key:"msg",value:function(){return 409===this.props.user.status?a.a.createElement("div",null,a.a.createElement("p",null,"This email/username exists in our database")):201===this.props.user.status?a.a.createElement("div",null,a.a.createElement("p",null,"User Added. Login")):void 0}},{key:"render",value:function(){return a.a.createElement("div",{className:"test"},a.a.createElement("h2",null,"Sign Up"),a.a.createElement("form",{className:"test",onSubmit:this.props.handleSubmit(this.onSubmit)},a.a.createElement(O.a,{name:"name",label:"Name",type:"text",component:this.renderInput}),a.a.createElement(O.a,{name:"email",label:"Email",type:"email",component:this.renderInput}),a.a.createElement(O.a,{name:"username",label:"Username",type:"text",component:this.renderInput}),a.a.createElement(O.a,{name:"password",label:"Password",type:"password",component:this.renderInput}),a.a.createElement("button",{className:"main_button"},"Submit")),this.msg())}}]),t}(a.a.Component),T=Object(c.b)((function(e){return{user:e.user}}),{createUser:function(e){return function(){var t=Object(g.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.post("/users",e);case 3:r=t.sent,n({type:"REGISTER_USER",payload:{status:r.status}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n({type:"REGISTER_ERROR",payload:{status:t.t0.response.status}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(v.a)({form:"register"})(x)),C=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"test cover_page",id:"main_background"},a.a.createElement("div",{id:"main_container"},a.a.createElement(N,null),a.a.createElement(T,null)))}}]),t}(a.a.Component),I=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.editPost(e,n.props.user.access_token,n.props.post.id,n.props.type)},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderInput",value:function(e){var t=e.input;return a.a.createElement("div",null,a.a.createElement("textarea",Object.assign({className:"input-post"},t,{maxLength:"150",placeholder:"Edit post",rows:"3",required:!0})))}},{key:"render",value:function(){return this.props.user.isLoggedIn&&this.props.post.username===this.props.user.username?o.a.createPortal(a.a.createElement("div",{className:"ui dimmer modals visible active",style:{position:"fixed"}},a.a.createElement("div",{className:"ui standard modal visible active"},a.a.createElement("div",{className:"header"},this.props.post.post),a.a.createElement("div",{className:"content"},a.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit),id:"editForm"},a.a.createElement(O.a,{name:"post",component:this.renderInput}))),a.a.createElement("div",{className:"actions"},a.a.createElement("button",{form:"editForm"},"Edit"),a.a.createElement("button",{onClick:this.props.editClose},"close")))),document.querySelector("#modal")):a.a.createElement(h.a,{to:"/"})}}]),t}(a.a.Component),D=Object(c.b)((function(e,t){return 1===t.type?{user:e.user,post:e.post[t.id]}:2===t.type?{user:e.user,post:e.userPost[t.id]}:void 0}),{editPost:function(e,t,n,r){return function(){var a=Object(g.a)(j.a.mark((function a(s){var o;return j.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,w.put("/posts/".concat(n),e,{headers:{Authorization:"Bearer ".concat(t)}});case 3:o=a.sent,console.log(o.data),1===r?s({type:"EDIT_POST",payload:o.data}):2===r&&s({type:"EDIT_USER_POST",payload:o.data}),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0.response);case 11:case 12:case"end":return a.stop()}}),a,null,[[0,8]])})));return function(e){return a.apply(this,arguments)}}()}})(Object(v.a)({form:"editedForm"})(I)),U=n(32),L=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={id:null,show:!1},n.more=function(){n.props.fetchSomePosts(n.props.user.access_token,n.props.post.length+3)},n.deleteOnClick=function(e){n.props.deletePost(n.props.user.access_token,e)},n.editOpen=function(e){n.setState({id:e,show:!0})},n.editClose=function(){n.setState({show:!1})},n.renderDeleteEdit=function(e){if(e.username===n.props.user.username||n.props.user.role)return a.a.createElement("div",{className:"post-buttons-containter"},a.a.createElement("button",{onClick:n.editOpen.bind(Object(U.a)(n),e.id)},"Edit"),a.a.createElement("button",{onClick:n.deleteOnClick.bind(Object(U.a)(n),e.id)},"Delete"))},n.renderPosts=function(){return n.props.post.map((function(e){return a.a.createElement("div",{className:"post",key:e.id},a.a.createElement("div",{className:"post-text-container"},e.post),a.a.createElement("div",{className:"post-username-container"},e.username),n.renderDeleteEdit(e))}))},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.user.isLoggedIn&&this.props.fetchSomePosts(this.props.user.access_token,8)}},{key:"checkMore",value:function(){return a.a.createElement("button",{onClick:this.more},"More")}},{key:"renderEdit",value:function(){if(this.state.show)return a.a.createElement(D,{id:this.state.id,show:this.state.show,editClose:this.editClose,type:1})}},{key:"render",value:function(){return console.log("Render works"),this.props.post.length?a.a.createElement("div",{className:"posts_container"},this.checkMore(),this.renderPosts(),this.renderEdit()):null}}]),t}(a.a.Component),A=Object(c.b)((function(e){return{user:e.user,post:Object.values(e.post)}}),{fetchPosts:function(e){return function(){var t=Object(g.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.get("/posts",{headers:{Authorization:"Bearer ".concat(e)}});case 3:r=t.sent,n({type:"FETCH_POSTS",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),401===t.t0.response.status&&n({type:"AUTH_ERROR",payload:{isLoggedIn:!1,access_token:""}});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchSomePosts:function(e,t){return function(){var n=Object(g.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log(t),n.next=4,w.get("/posts/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});case 4:a=n.sent,console.log(a.data),r({type:"FETCH_POSTS",payload:a.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),401===n.t0.response.status&&r({type:"AUTH_ERROR",payload:{isLoggedIn:!1,access_token:""}});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()},deletePost:_})(L),G=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(e){n.props.createPost(e,n.props.user.access_token)},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"renderInput",value:function(e){var t=e.input,n=(e.type,e.placeholder);return a.a.createElement("textarea",Object.assign({className:"input-post"},t,{maxLength:"150",placeholder:n,rows:"3",required:!0}))}},{key:"render",value:function(){return a.a.createElement("div",{className:"input-post-container"},a.a.createElement("form",{className:"test",onSubmit:this.props.handleSubmit(this.onSubmit)},a.a.createElement(O.a,{name:"post",type:"text",placeholder:"What are you thinking about?",component:this.renderInput}),a.a.createElement("button",{className:"post-button"},"Post")))}}]),t}(a.a.Component),H=Object(c.b)((function(e){return{user:e.user}}),{createPost:function(e,t){return function(){var n=Object(g.a)(j.a.mark((function n(r){var a;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.post("/posts",e,{headers:{Authorization:"Bearer ".concat(t)}});case 3:a=n.sent,r({type:"CREATE_POST",payload:a.data}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0.response);case 10:case 11:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}})(Object(v.a)({form:"post"})(G)),F=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(a)))).onSubmit=function(){n.props.logoutUser(n.props.user.access_token)},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"logout"},a.a.createElement("form",{onSubmit:this.props.handleSubmit(this.onSubmit)},a.a.createElement("button",null,"Logout")))}}]),t}(a.a.Component),M=Object(c.b)((function(e){return{user:e.user}}),{logoutUser:function(e){return function(){var t=Object(g.a)(j.a.mark((function t(n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,w.delete("/logout",{headers:{Authorization:"Bearer ".concat(e)}});case 3:r=t.sent,n({type:"LOGOUT_USER",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0.response);case 10:case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}})(Object(v.a)({form:"logout"})(F)),z=Object(c.b)((function(e){return{user:e.user}}))((function(e){return a.a.createElement("div",{className:"header"},a.a.createElement(f.b,{className:"profile",to:"/dashboard"},"home"),a.a.createElement(f.b,{className:"profile",to:"/profile"},e.user.username),a.a.createElement(M,null))})),B=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return this.props.user.isLoggedIn?a.a.createElement("div",{className:"cover_page",style:{backgroundColor:"#f0f2f5"}},a.a.createElement("div",{className:"test1"},a.a.createElement(z,null),a.a.createElement(H,null),a.a.createElement(A,null))):a.a.createElement(h.a,{to:"/"})}}]),t}(a.a.Component),q=Object(c.b)((function(e){return{user:e.user}}))(B),J=function(e){function t(){var e,n;Object(l.a)(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(s)))).state={id:null,show:!1},n.more=function(){n.props.fetchUserPosts(n.props.user.access_token,n.props.user.username,n.props.post.length+3)},n.deleteOnClick=function(e){n.props.deletePost(n.props.user.access_token,e)},n.editOpen=function(e){n.setState({id:e,show:!0})},n.editClose=function(){n.setState({show:!1})},n.renderDeleteEdit=function(e){if(e.username===n.props.user.username||n.props.user.role)return a.a.createElement("div",{className:"post-buttons-containter"},a.a.createElement("button",{onClick:n.editOpen.bind(Object(U.a)(n),e.id)},"Edit"),a.a.createElement("button",{onClick:n.deleteOnClick.bind(Object(U.a)(n),e.id)},"Delete"))},n}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.user.isLoggedIn&&this.props.fetchUserPosts(this.props.user.access_token,this.props.user.username,8)}},{key:"renderPosts",value:function(){var e=this;return this.props.post.map((function(t){return a.a.createElement("div",{className:"post",key:t.id},a.a.createElement("div",{className:"post-text-container"},t.post),a.a.createElement("div",{className:"post-username-container"},t.username),e.renderDeleteEdit(t))}))}},{key:"checkMore",value:function(){if(this.props.post.length>7)return a.a.createElement("button",{onClick:this.more},"More")}},{key:"renderEdit",value:function(){if(this.state.show)return a.a.createElement(D,{id:this.state.id,show:this.state.show,editClose:this.editClose,type:2})}},{key:"render",value:function(){return this.props.user.isLoggedIn?a.a.createElement("div",{className:"cover_page",style:{backgroundColor:"#f0f2f5"}},a.a.createElement("div",{className:"test1"},a.a.createElement(z,null),a.a.createElement("div",{className:"posts_container"},this.checkMore(),this.renderPosts(),this.renderEdit()))):a.a.createElement(h.a,{to:"/"})}}]),t}(a.a.Component),K=Object(c.b)((function(e){return{user:e.user,post:Object.values(e.userPost)}}),{fetchUserPosts:function(e,t,n){return function(){var r=Object(g.a)(j.a.mark((function r(a){var s;return j.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,w.get("/users/".concat(t,"/").concat(n),{headers:{Authorization:"Bearer ".concat(e)}});case 3:s=r.sent,a({type:"FETCH_USER_POSTS",payload:s.data}),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),401===r.t0.response.status&&a({type:"AUTH_ERROR",payload:{isLoggedIn:!1,access_token:""}});case 10:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(e){return r.apply(this,arguments)}}()},deletePost:_})(J),W=function(e){function t(){return Object(l.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:"cover_page"},a.a.createElement(f.a,null,a.a.createElement("div",{className:"cover_page"},a.a.createElement(h.b,{path:"/",exact:!0,component:C}),a.a.createElement(h.b,{path:"/dashboard",exact:!0,component:q}),a.a.createElement(h.b,{path:"/profile",exact:!0,component:K}))))}}]),t}(a.a.Component),Q=n(241);function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Y=n(27),Z=n.n(Y);function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(y.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var re=Object(u.c)({form:Q.a,user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{status:200},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER":case"LOGOUT_USER":case"LOGIN_ERROR":case"REGISTER_USER":case"REGISTER_ERROR":case"AUTH_ERROR":return X({},e,{},t.payload);default:return e}},post:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_POSTS":case"CREATE_POST":return ee({},e,{},Z.a.mapKeys(t.payload,"id"));case"DELETE_POST":return Z.a.omit(e,t.payload);case"EDIT_POST":return ee({},e,{},Z.a.mapKeys([t.payload],"id"));default:return e}},userPost:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USER_POSTS":return ne({},e,{},Z.a.mapKeys(t.payload,"id"));case"DELETE_POST":return Z.a.omit(e,t.payload);case"EDIT_USER_POST":return ne({},e,{},Z.a.mapKeys([t.payload],"id"));default:return e}}}),ae=function(){var e=localStorage.getItem("state");return null===e?void 0:JSON.parse(e)}(),se=Object(u.d)(re,ae,Object(u.a)(i.a));o.a.render(a.a.createElement(c.a,{store:se},a.a.createElement(W,null)),document.querySelector("#root")),se.subscribe((function(){return function(e){var t=JSON.stringify(e);localStorage.setItem("state",t)}(se.getState())}))},26:function(e,t,n){}},[[113,1,2]]]);
//# sourceMappingURL=main.5894c571.chunk.js.map